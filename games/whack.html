<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Tape‚ÄëTaupe</title>
    <meta name="description" content="Jeu Tape‚ÄëTaupe (Whack‚Äëa‚ÄëMole)" />
    <link rel="icon" href="../assets/favicon.svg">
    <link rel="stylesheet" href="../assets/site.css">
    <style>
      :root { color-scheme: light dark; }
      * { box-sizing: border-box; }
      body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji', sans-serif; }
      header { display: flex; justify-content: space-between; align-items: center; padding: 1rem; border-bottom: 1px solid currentColor; }
      header a { text-decoration: none; color: inherit; }
      main { max-width: 720px; margin: 0 auto; padding: 1.25rem 1rem 3rem; }
      h1 { margin: 0; font-size: clamp(22px, 4vw, 32px); }
      .bar { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; margin-top: 0.5rem; }
      .badge { padding: 0.35rem 0.6rem; border: 1px solid currentColor; border-radius: 999px; }
      .grid { display: grid; grid-template-columns: repeat(3, 120px); gap: 12px; justify-content: center; margin-top: 1rem; }
      .hole { width: 120px; height: 120px; border-radius: 12px; border: 1px solid currentColor; display: grid; place-items: center; position: relative; overflow: hidden; background: color-mix(in oklab, currentColor 8%, transparent); }
      .mole { font-size: 48px; position: absolute; bottom: -80px; transition: bottom 120ms ease; }
      .up .mole { bottom: 20px; }
      button { font: inherit; padding: 0.5rem 0.9rem; border: 1px solid currentColor; background: transparent; border-radius: 10px; cursor: pointer; }
    </style>
  </head>
  <body>
    <header class="site">
      <div class="left"><a class="btn ghost" href="../index.html">‚Üê Accueil</a></div>
      <h1>üêπ Tape‚ÄëTaupe</h1>
      <div class="right"><button id="theme-toggle" class="theme-toggle" aria-label="Changer de th√®me">üåô</button></div>
    </header>
    <main class="container">
      <div class="ad-wrap" aria-label="Publicit√©">
        <small class="ad-label">Publicit√©</small>
        <ins class="adsbygoogle" style="display:block"
             data-ad-client="ca-pub-6741696677775096"
             data-ad-slot="4777820316"
             data-ad-format="auto" data-full-width-responsive="true"></ins>
      </div>
      <div class="bar">
        <div class="badge">Score: <span id="score">0</span></div>
        <div class="badge">Temps: <span id="time">30</span>s</div>
        <button id="start">D√©marrer</button>
      </div>
      <div id="grid" class="grid"></div>
      <div class="ad-wrap" aria-label="Publicit√©">
        <small class="ad-label">Publicit√©</small>
        <ins class="adsbygoogle" style="display:block"
             data-ad-client="ca-pub-6741696677775096"
             data-ad-slot="3464738647"
             data-ad-format="auto" data-full-width-responsive="true"></ins>
      </div>
    </main>
    <script defer src="../assets/config.js"></script>
    <script defer src="../assets/site.js"></script>
    <script>
      (function(){
        const grid = document.getElementById('grid');
        const scoreEl = document.getElementById('score');
        const timeEl = document.getElementById('time');
        const startBtn = document.getElementById('start');
        let holes=[], score=0, time=30, playing=false, moleTimer, timeTimer;

        function render(){
          grid.innerHTML=''; holes=[];
          for(let i=0;i<9;i++){
            const d=document.createElement('div'); d.className='hole';
            const m=document.createElement('div'); m.className='mole'; m.textContent='üêπ';
            d.appendChild(m); d.addEventListener('click', ()=>whack(d));
            grid.appendChild(d); holes.push(d);
          }
        }

        function whack(h){ if(!playing) return; if(h.classList.contains('up')){ score++; scoreEl.textContent=score; h.classList.remove('up'); } }
        function pop(){ holes.forEach(h=>h.classList.remove('up')); const h = holes[Math.floor(Math.random()*holes.length)]; h.classList.add('up'); setTimeout(()=>h.classList.remove('up'), 700); }
        function start(){ score=0; scoreEl.textContent=score; time=30; timeEl.textContent=time; playing=true; render();
          clearInterval(moleTimer); clearInterval(timeTimer);
          moleTimer=setInterval(pop, 800);
          timeTimer=setInterval(()=>{ time--; timeEl.textContent=time; if(time<=0){ stop(); alert('Termin√© ! Score: '+score); } }, 1000);
        }
        function stop(){ playing=false; clearInterval(moleTimer); clearInterval(timeTimer); holes.forEach(h=>h.classList.remove('up')); }

        startBtn.addEventListener('click', start);
        render();
      })();
    </script>
  </body>
  
</html>
