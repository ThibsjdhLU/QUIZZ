<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Memory</title>
    <meta name="description" content="Jeu de memory 4x4" />
    <meta name="google-adsense-account" content="ca-pub-6741696677775096" />
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6741696677775096" crossorigin="anonymous"></script>
    <link rel="icon" href="../assets/favicon.svg">
    <link rel="stylesheet" href="../assets/site.css">
    <style>
      :root { color-scheme: light dark; }
      * { box-sizing: border-box; }
      body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji', sans-serif; }
      header { display: flex; justify-content: space-between; align-items: center; padding: 1rem; border-bottom: 1px solid currentColor; }
      header a { text-decoration: none; color: inherit; }
      main { max-width: 720px; margin: 0 auto; padding: 1.25rem 1rem 3rem; }
      h1 { margin: 0; font-size: clamp(22px, 4vw, 32px); }
      .info { margin: 0.5rem 0 1rem; opacity: 0.9; display: flex; gap: 16px; flex-wrap: wrap; }
      .badge { padding: 0.35rem 0.6rem; border: 1px solid currentColor; border-radius: 999px; }
      .grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; }
      .card { position: relative; aspect-ratio: 1/1; border: 1px solid currentColor; border-radius: 16px; cursor: pointer; overflow: hidden; background: color-mix(in oklab, currentColor 6%, transparent); }
      .face { position: absolute; inset: 0; display: grid; place-items: center; font-size: clamp(24px, 6vw, 44px); transition: transform 220ms ease; backface-visibility: hidden; }
      .front { transform: rotateY(0deg); }
      .back { transform: rotateY(180deg); }
      .flipped .front { transform: rotateY(180deg); }
      .flipped .back { transform: rotateY(0deg); }
      .matched { background: color-mix(in oklab, lime 20%, transparent); cursor: default; }
      .controls { margin-top: 1rem; }
      button { font: inherit; padding: 0.5rem 0.9rem; border: 1px solid currentColor; background: transparent; border-radius: 10px; cursor: pointer; }
    </style>
  </head>
  <body>
    <header class="site">
      <div class="left"><a class="btn ghost" href="../index.html">‚Üê Accueil</a></div>
      <h1>üß† Memory</h1>
      <div class="right"><button id="theme-toggle" class="theme-toggle" aria-label="Changer de th√®me">üåô</button></div>
    </header>
    <main class="container">
      <div class="ad-wrap" aria-label="Publicit√©">
        <small class="ad-label">Publicit√©</small>
        <ins class="adsbygoogle" style="display:block"
             data-ad-client="ca-pub-6741696677775096"
             data-ad-slot="4777820316"
             data-ad-format="auto" data-full-width-responsive="true"></ins>
      </div>
      <div class="info">
        <div class="badge">Coups: <span id="moves">0</span></div>
        <div class="badge">Paires: <span id="pairs">0</span>/8</div>
        <div class="badge">Temps: <span id="time">0.0</span>s</div>
      </div>
      <div id="grid" class="grid" aria-label="Plateau de memory"></div>
      <div class="controls"><button id="reset">Rejouer</button></div>
      <div class="ad-wrap" aria-label="Publicit√©">
        <small class="ad-label">Publicit√©</small>
        <ins class="adsbygoogle" style="display:block"
             data-ad-client="ca-pub-6741696677775096"
             data-ad-slot="3464738647"
             data-ad-format="auto" data-full-width-responsive="true"></ins>
      </div>
    </main>
    <script defer src="../assets/config.js"></script>
    <script defer src="../assets/site.js"></script>
    <script>
      (function(){
        const EMOJI = ['üçé','üçå','üçí','üçâ','üçá','ü•ù','üçë','üçç','üåü','üî•','‚ùÑÔ∏è','üíß','üçÄ','üåà','‚òÄÔ∏è','üåô'];
        const grid = document.getElementById('grid');
        const movesEl = document.getElementById('moves');
        const pairsEl = document.getElementById('pairs');
        const timeEl = document.getElementById('time');
        const resetBtn = document.getElementById('reset');
        let data, first, second, lock=false, moves=0, pairs=0, start, timer;

        function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; } return a; }
        function cards(){ const pick = shuffle(EMOJI.slice()).slice(0,8); return shuffle([...pick, ...pick]); }

        function render(){
          grid.innerHTML = '';
          data.forEach((v, i)=>{
            const card = document.createElement('button');
            card.className = 'card';
            card.setAttribute('aria-label', 'Carte');
            card.dataset.index = i;
            card.innerHTML = `<div class="face front"></div><div class="face back">${v}</div>`;
            card.addEventListener('click', ()=>flip(card));
            grid.appendChild(card);
          });
        }

        function startTimer(){ start = performance.now(); timer = setInterval(()=>{ const t=(performance.now()-start)/1000; timeEl.textContent = t.toFixed(1); }, 100); }
        function stopTimer(){ clearInterval(timer); }

        function init(){ data = cards(); first=second=undefined; lock=false; moves=pairs=0; movesEl.textContent='0'; pairsEl.textContent='0'; timeEl.textContent='0.0'; render(); stopTimer(); startTimer(); }

        function flip(card){
          if(lock || card.classList.contains('flipped') || card.classList.contains('matched')) return;
          card.classList.add('flipped');
          if(!first){ first = card; return; }
          second = card; lock = true; moves++; movesEl.textContent = moves;
          const i = +first.dataset.index, j = +second.dataset.index;
          if(data[i] === data[j]){
            setTimeout(()=>{ first.classList.add('matched'); second.classList.add('matched'); first=second=undefined; lock=false; pairs++; pairsEl.textContent = pairs; if(pairs===8){ stopTimer(); } }, 300);
          } else {
            setTimeout(()=>{ first.classList.remove('flipped'); second.classList.remove('flipped'); first=second=undefined; lock=false; }, 700);
          }
        }

        resetBtn.addEventListener('click', init);
        init();
      })();
    </script>
  </body>
  
</html>
